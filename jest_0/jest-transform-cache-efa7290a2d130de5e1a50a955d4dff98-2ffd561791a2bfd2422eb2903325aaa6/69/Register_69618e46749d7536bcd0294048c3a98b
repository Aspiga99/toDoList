c5d77ad14e13db1f8933e060993bab80
;(function(){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _firebase_config = require("../config/firebase_config.js");

exports.default = {
  props: ["testing"],
  data: function data() {
    return {
      user: {
        email: "",
        password: "",
        name: "",
        surname: ""
      },
      passwordReEntered: "",
      validPassword: false,
      equalPassword: true,
      userExists: false,
      validEmail: false,
      userCreated: false,
      emptyFields: true,
      creatingUser: false,
      validData: false
    };
  },
  updated: function updated() {},
  created: function created() {
    var _this = this;

    this.analysePassword(this.user.password);
    if (!this.testing) {
      this.$nextTick(function () {
        _this.checkIfEmptyFields();
      });
    }
    this.userExists = false;
  },

  methods: {
    // check is the email is valid or not
    checkEmail: function checkEmail(email) {
      var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
      var validEmail = re.test(email);
      return validEmail;
    },
    // create the user user in firebase
    createUser: function createUser() {
      var _this2 = this;

      if (this.validPassword && this.equalPassword && this.validEmail && !this.emptyFields) {
        this.validData = true;
        this.creatingUser = true;
        if (!this.testing) {
          _firebase_config.auth.createUserWithEmailAndPassword(this.user.email, this.user.password).then(function (user) {
            if (user) {
              //the user has been created
              // the user is created
              _this2.userCreated = true;
              //there aren't empty fields
              _this2.emptyFields = false;
              // the user not exists
              _this2.userExists = false;
              _firebase_config.auth.onAuthStateChanged(function (user) {
                if (user) {
                  _this2.$http.get("https://todolist-project99.firebaseio.com/users/" + user.uid + "/information.json").then(function (data) {
                    return data.json();
                  }).then(function (data) {
                    if (data == null) {
                      console.log("aaa");
                      _firebase_config.database.ref('users/' + user.uid + "/information").set({
                        email: _this2.user.email,
                        name: _this2.user.name,
                        surname: _this2.user.surname
                      });
                    }
                    _this2.creatingUser = false;
                  });
                }
              });
              alert("Il tuo account è stato creato! \n Ora puoi creare i tuoi progetti nella home");
            }
          }, function (err) {
            _this2.creatingUser = false;
            // the hasn't beed created
            _this2.userCreated = false;
            // the user already exists
            _this2.userExists = true;
            console.log(err.message);
          });
        } else {
          console.log("test... dati validi e utente creato");
        }
      } else {
        if (this.testing) {
          this.validData = false;
        } else {
          this.validData = false;
          this.userCreated = false;
          this.validPassword = this.analysePassword(this.user.password);
          this.validEmail = this.checkEmail(this.user.email);
          this.checkIfEmptyFields();
          alert("dati non validi");
        }
      }
    },
    // check if the password is valid
    analysePassword: function analysePassword(password) {
      if (password != undefined && password != null) {
        var re = new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{6,})");
        var check = re.test(password);
        return check;
      } else {
        return false;
      }
    },
    //check if the string has the min length
    checklengthString: function checklengthString(s, minlength) {
      if (s != undefined && s != null && minlength > 0) {
        if (s.length < minlength) {
          // the string is short
          return true;
        } else {
          // the string length is good
          return false;
        }
      } else return false;
    },
    //check if s1 and s2 are equal
    checkIfEqualString: function checkIfEqualString(s1, s2) {
      if (s1 != undefined && s1 != null && s2 != undefined && s2 != null) {
        if (s1 === s2) return true;else return false;
      } else {
        return false;
      }
    },
    checkIfEmptyFields: function checkIfEmptyFields() {
      if (this.user.name == "" || this.user.surname == "" || this.user.email == "" || this.user.password == "" || this.passwordReEntered == "") {
        this.emptyFields = true;
        document.getElementById("registerButton").disabled = true;
      } else {
        this.emptyFields = false;
        document.getElementById("registerButton").disabled = false;
      }
    }
  }
}; //
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
})()
var defaultExport = (module.exports.__esModule) ? module.exports.default : module.exports;var __vue__options__ = (typeof defaultExport === "function"? defaultExport.options: defaultExport)
__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{"id":"register-from"}},[(!_vm.userCreated)?_c('form',[_c('h4',[_vm._v("Registrati")]),_vm._v(" "),_c('input',{directives:[{name:"model",rawName:"v-model",value:(_vm.user.name),expression:"user.name"}],attrs:{"type":"text","id":"name","max-length":"50","placeholder":"inserisci nome","required":""},domProps:{"value":(_vm.user.name)},on:{"keyup":function($event){_vm.checkIfEmptyFields()},"input":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, "name", $event.target.value)}}}),_vm._v(" "),_c('input',{directives:[{name:"model",rawName:"v-model",value:(_vm.user.surname),expression:"user.surname"}],attrs:{"type":"text","max-length":"50","placeholder":"inserisci cognome","required":""},domProps:{"value":(_vm.user.surname)},on:{"keyup":function($event){_vm.checkIfEmptyFields()},"input":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, "surname", $event.target.value)}}}),_vm._v(" "),_c('input',{directives:[{name:"model",rawName:"v-model",value:(_vm.user.email),expression:"user.email"}],attrs:{"type":"text","max-length":"50","placeholder":"inserisci indirizzo email","required":""},domProps:{"value":(_vm.user.email)},on:{"keyup":function($event){_vm.validEmail = _vm.checkEmail(_vm.user.email); _vm.checkIfEmptyFields()},"input":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, "email", $event.target.value)}}}),_vm._v(" "),(!_vm.validEmail)?_c('span',{staticClass:"errorMessage"},[_vm._v("* inserire un indirizzo email valido")]):_vm._e(),_vm._v(" "),(_vm.userExists)?_c('span',{staticClass:"errorMessage"},[_vm._v("* indirizzo email già esistente")]):_vm._e(),_vm._v(" "),_c('input',{directives:[{name:"model",rawName:"v-model",value:(_vm.user.password),expression:"user.password"}],attrs:{"id":"input-password","type":"password","placeholder":"inserisci password","required":""},domProps:{"value":(_vm.user.password)},on:{"keyup":function($event){_vm.validPassword = _vm.analysePassword(_vm.user.password); _vm.checkIfEmptyFields(); _vm.equalPassword = _vm.checkIfEqualString(_vm.user.password, _vm.passwordReEntered);},"input":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, "password", $event.target.value)}}}),_vm._v(" "),(!_vm.validPassword)?_c('span',{staticClass:"errorMessage"},[_vm._v("* La password deve essere di almeno 6 caratteri e contenere almeno 1 carattere Maiuscolo, 1 carattere minuscolo e 1 numero"),_c('br')]):_vm._e(),_vm._v(" "),_c('input',{directives:[{name:"model",rawName:"v-model",value:(_vm.passwordReEntered),expression:"passwordReEntered"}],attrs:{"type":"password","placeholder":"reinserisci password","required":""},domProps:{"value":(_vm.passwordReEntered)},on:{"keyup":function($event){_vm.equalPassword = _vm.checkIfEqualString(_vm.user.password, _vm.passwordReEntered); _vm.checkIfEmptyFields()},"input":function($event){if($event.target.composing){ return; }_vm.passwordReEntered=$event.target.value}}}),_vm._v(" "),(!_vm.equalPassword)?_c('span',{staticClass:"errorMessage"},[_vm._v("* le password inserite non corrispondono"),_c('br')]):_vm._e(),_vm._v(" "),(_vm.emptyFields)?_c('span',{staticClass:"errorMessage"},[_vm._v("* compilare tutti i campi")]):_vm._e(),_vm._v(" "),_c('button',{staticClass:"btn btn-primary",attrs:{"id":"registerButton"},on:{"click":function($event){$event.preventDefault();return _vm.createUser($event)}}},[_vm._v("\n      Registrati\n      "),(_vm.creatingUser)?_c('img',{attrs:{"id":"loadingGif","src":"../../assets/images/loading.gif"}}):_vm._e()])]):_vm._e()])}
__vue__options__.staticRenderFns = []

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJlZ2lzdGVyLnZ1ZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBd0JBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFmQTtBQWlCQTtBQUNBO0FBR0E7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFuSEE7QUFqQ0E7QUF4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyI8dGVtcGxhdGUgbGFuZz1cImh0bWxcIj5cclxuICA8ZGl2IGlkPVwicmVnaXN0ZXItZnJvbVwiPlxyXG4gICAgPGZvcm0gdi1pZj1cIiF1c2VyQ3JlYXRlZFwiPlxyXG4gICAgICA8aDQ+UmVnaXN0cmF0aTwvaDQ+XHJcbiAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwibmFtZVwiIG1heC1sZW5ndGg9XCI1MFwiIHYtbW9kZWw9XCJ1c2VyLm5hbWVcIiBwbGFjZWhvbGRlcj1cImluc2VyaXNjaSBub21lXCIgdi1vbjprZXl1cD1cImNoZWNrSWZFbXB0eUZpZWxkcygpXCIgcmVxdWlyZWQ+XHJcbiAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG1heC1sZW5ndGg9XCI1MFwiIHYtbW9kZWw9XCJ1c2VyLnN1cm5hbWVcIiBwbGFjZWhvbGRlcj1cImluc2VyaXNjaSBjb2dub21lXCIgdi1vbjprZXl1cD1cImNoZWNrSWZFbXB0eUZpZWxkcygpXCIgcmVxdWlyZWQ+XHJcbiAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG1heC1sZW5ndGg9XCI1MFwiIHYtb246a2V5dXA9XCJ2YWxpZEVtYWlsID0gY2hlY2tFbWFpbCh1c2VyLmVtYWlsKTsgY2hlY2tJZkVtcHR5RmllbGRzKClcIiB2LW1vZGVsPVwidXNlci5lbWFpbFwiIHBsYWNlaG9sZGVyPVwiaW5zZXJpc2NpIGluZGlyaXp6byBlbWFpbFwiIHJlcXVpcmVkPlxyXG4gICAgICA8c3BhbiBjbGFzcz1cImVycm9yTWVzc2FnZVwiIHYtaWY9XCIhdmFsaWRFbWFpbFwiPiogaW5zZXJpcmUgdW4gaW5kaXJpenpvIGVtYWlsIHZhbGlkbzwvc3Bhbj5cclxuICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvck1lc3NhZ2VcIiB2LWlmPVwidXNlckV4aXN0c1wiPiogaW5kaXJpenpvIGVtYWlsIGdpw6AgZXNpc3RlbnRlPC9zcGFuPlxyXG4gICAgICA8aW5wdXQgIGlkPVwiaW5wdXQtcGFzc3dvcmRcIiB0eXBlPVwicGFzc3dvcmRcIiB2LW9uOmtleXVwPVwidmFsaWRQYXNzd29yZCA9IGFuYWx5c2VQYXNzd29yZCh1c2VyLnBhc3N3b3JkKTsgY2hlY2tJZkVtcHR5RmllbGRzKCk7IGVxdWFsUGFzc3dvcmQgPSBjaGVja0lmRXF1YWxTdHJpbmcodXNlci5wYXNzd29yZCwgcGFzc3dvcmRSZUVudGVyZWQpO1wiICB2LW1vZGVsPVwidXNlci5wYXNzd29yZFwiIHBsYWNlaG9sZGVyPVwiaW5zZXJpc2NpIHBhc3N3b3JkXCIgcmVxdWlyZWQ+XHJcbiAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JNZXNzYWdlXCIgdi1pZj1cIiF2YWxpZFBhc3N3b3JkXCI+KiBMYSBwYXNzd29yZCBkZXZlIGVzc2VyZSBkaSBhbG1lbm8gNiBjYXJhdHRlcmkgZSBjb250ZW5lcmUgYWxtZW5vIDEgY2FyYXR0ZXJlIE1haXVzY29sbywgMSBjYXJhdHRlcmUgbWludXNjb2xvIGUgMSBudW1lcm88L2JyPjwvc3Bhbj5cclxuICAgICAgPGlucHV0IHR5cGU9XCJwYXNzd29yZFwiIHYtb246a2V5dXA9XCJlcXVhbFBhc3N3b3JkID0gY2hlY2tJZkVxdWFsU3RyaW5nKHVzZXIucGFzc3dvcmQsIHBhc3N3b3JkUmVFbnRlcmVkKTsgY2hlY2tJZkVtcHR5RmllbGRzKClcIiB2LW1vZGVsPVwicGFzc3dvcmRSZUVudGVyZWRcIiBwbGFjZWhvbGRlcj1cInJlaW5zZXJpc2NpIHBhc3N3b3JkXCIgcmVxdWlyZWQ+XHJcbiAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JNZXNzYWdlXCIgdi1pZj1cIiFlcXVhbFBhc3N3b3JkXCI+KiBsZSBwYXNzd29yZCBpbnNlcml0ZSBub24gY29ycmlzcG9uZG9ubzwvYnI+PC9zcGFuPlxyXG4gICAgICA8c3BhbiBjbGFzcz1cImVycm9yTWVzc2FnZVwiIHYtaWY9XCJlbXB0eUZpZWxkc1wiPiogY29tcGlsYXJlIHR1dHRpIGkgY2FtcGk8L3NwYW4+XHJcblxyXG4gICAgICA8YnV0dG9uIGlkPVwicmVnaXN0ZXJCdXR0b25cIiB2LW9uOmNsaWNrLnByZXZlbnQ9XCJjcmVhdGVVc2VyXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIj5cclxuICAgICAgICBSZWdpc3RyYXRpXHJcbiAgICAgICAgPGltZyBpZD1cImxvYWRpbmdHaWZcIiB2LWlmPVwiY3JlYXRpbmdVc2VyXCIgc3JjPVwiLi4vLi4vYXNzZXRzL2ltYWdlcy9sb2FkaW5nLmdpZlwiLz5cclxuICAgICAgPC9idXR0b24+XHJcbiAgICA8L2Zvcm0+XHJcbiAgPC9kaXY+XHJcbjwvdGVtcGxhdGU+XHJcblxyXG48c2NyaXB0PlxyXG5pbXBvcnQgeyBhdXRoLCBkYXRhYmFzZSB9IGZyb20gXCIuLi9jb25maWcvZmlyZWJhc2VfY29uZmlnLmpzXCJcclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIHByb3BzOltcInRlc3RpbmdcIl0sXHJcbiAgZGF0YSgpe1xyXG4gICAgcmV0dXJue1xyXG4gICAgICB1c2VyOntcclxuICAgICAgICBlbWFpbDogXCJcIixcclxuICAgICAgICBwYXNzd29yZDogXCJcIixcclxuICAgICAgICBuYW1lOiBcIlwiLFxyXG4gICAgICAgIHN1cm5hbWU6IFwiXCJcclxuICAgICAgfSxcclxuICAgICAgcGFzc3dvcmRSZUVudGVyZWQ6IFwiXCIsXHJcbiAgICAgIHZhbGlkUGFzc3dvcmQ6IGZhbHNlLFxyXG4gICAgICBlcXVhbFBhc3N3b3JkOiB0cnVlLFxyXG4gICAgICB1c2VyRXhpc3RzOiBmYWxzZSxcclxuICAgICAgdmFsaWRFbWFpbDogZmFsc2UsXHJcbiAgICAgIHVzZXJDcmVhdGVkOiBmYWxzZSxcclxuICAgICAgZW1wdHlGaWVsZHM6IHRydWUsXHJcbiAgICAgIGNyZWF0aW5nVXNlcjogZmFsc2UsXHJcbiAgICAgIHZhbGlkRGF0YTogZmFsc2VcclxuICAgIH1cclxuICB9LFxyXG4gIHVwZGF0ZWQoKXtcclxuXHJcbiAgfSxcclxuICBjcmVhdGVkKCl7XHJcbiAgICB0aGlzLmFuYWx5c2VQYXNzd29yZCh0aGlzLnVzZXIucGFzc3dvcmQpO1xyXG4gICAgaWYoIXRoaXMudGVzdGluZyl7XHJcbiAgICAgIHRoaXMuJG5leHRUaWNrKCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jaGVja0lmRW1wdHlGaWVsZHMoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnVzZXJFeGlzdHMgPSBmYWxzZTtcclxuICB9LFxyXG4gIG1ldGhvZHM6IHtcclxuICAgIC8vIGNoZWNrIGlzIHRoZSBlbWFpbCBpcyB2YWxpZCBvciBub3RcclxuICAgIGNoZWNrRW1haWw6IGZ1bmN0aW9uKGVtYWlsKSB7XHJcbiAgICAgIHZhciByZSA9IC9eKChbXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKFxcLltePD4oKVtcXF1cXFxcLiw7Olxcc0BcXFwiXSspKil8KFxcXCIuK1xcXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xyXG4gICAgICB2YXIgdmFsaWRFbWFpbCA9IHJlLnRlc3QoZW1haWwpO1xyXG4gICAgICByZXR1cm4gdmFsaWRFbWFpbDtcclxuICAgIH0sXHJcbiAgICAvLyBjcmVhdGUgdGhlIHVzZXIgdXNlciBpbiBmaXJlYmFzZVxyXG4gICAgY3JlYXRlVXNlcjogZnVuY3Rpb24oKXtcclxuICAgICAgICBpZih0aGlzLnZhbGlkUGFzc3dvcmQgJiYgdGhpcy5lcXVhbFBhc3N3b3JkICYmIHRoaXMudmFsaWRFbWFpbCAmJiAhdGhpcy5lbXB0eUZpZWxkcyl7XHJcbiAgICAgICAgICB0aGlzLnZhbGlkRGF0YSA9IHRydWU7XHJcbiAgICAgICAgICB0aGlzLmNyZWF0aW5nVXNlciA9IHRydWU7XHJcbiAgICAgICAgICBpZighdGhpcy50ZXN0aW5nKXtcclxuICAgICAgICAgICAgYXV0aC5jcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQodGhpcy51c2VyLmVtYWlsLCB0aGlzLnVzZXIucGFzc3dvcmQpLnRoZW4oICh1c2VyKSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYodXNlcil7IC8vdGhlIHVzZXIgaGFzIGJlZW4gY3JlYXRlZFxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIHVzZXIgaXMgY3JlYXRlZFxyXG4gICAgICAgICAgICAgICAgdGhpcy51c2VyQ3JlYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvL3RoZXJlIGFyZW4ndCBlbXB0eSBmaWVsZHNcclxuICAgICAgICAgICAgICAgIHRoaXMuZW1wdHlGaWVsZHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIC8vIHRoZSB1c2VyIG5vdCBleGlzdHNcclxuICAgICAgICAgICAgICAgIHRoaXMudXNlckV4aXN0cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYXV0aC5vbkF1dGhTdGF0ZUNoYW5nZWQoICh1c2VyKSA9PntcclxuICAgICAgICAgICAgICAgICAgaWYodXNlcil7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kaHR0cC5nZXQoXCJodHRwczovL3RvZG9saXN0LXByb2plY3Q5OS5maXJlYmFzZWlvLmNvbS91c2Vycy9cIiArIHVzZXIudWlkICsgXCIvaW5mb3JtYXRpb24uanNvblwiKS50aGVuKCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuanNvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhID09IG51bGwpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImFhYVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2UucmVmKCd1c2Vycy8nICsgdXNlci51aWQgKyBcIi9pbmZvcm1hdGlvblwiKS5zZXQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLnVzZXIuZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy51c2VyLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3VybmFtZTogdGhpcy51c2VyLnN1cm5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0aW5nVXNlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiSWwgdHVvIGFjY291bnQgw6ggc3RhdG8gY3JlYXRvISBcXG4gT3JhIHB1b2kgY3JlYXJlIGkgdHVvaSBwcm9nZXR0aSBuZWxsYSBob21lXCIpO1xyXG5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLmNyZWF0aW5nVXNlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIC8vIHRoZSBoYXNuJ3QgYmVlZCBjcmVhdGVkXHJcbiAgICAgICAgICAgICAgdGhpcy51c2VyQ3JlYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIC8vIHRoZSB1c2VyIGFscmVhZHkgZXhpc3RzXHJcbiAgICAgICAgICAgICAgdGhpcy51c2VyRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidGVzdC4uLiBkYXRpIHZhbGlkaSBlIHV0ZW50ZSBjcmVhdG9cIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgaWYodGhpcy50ZXN0aW5nKXtcclxuICAgICAgICAgICAgdGhpcy52YWxpZERhdGEgPSBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnZhbGlkRGF0YSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnVzZXJDcmVhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMudmFsaWRQYXNzd29yZCA9IHRoaXMuYW5hbHlzZVBhc3N3b3JkKHRoaXMudXNlci5wYXNzd29yZCk7XHJcbiAgICAgICAgICAgIHRoaXMudmFsaWRFbWFpbCA9IHRoaXMuY2hlY2tFbWFpbCh0aGlzLnVzZXIuZW1haWwpO1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrSWZFbXB0eUZpZWxkcygpO1xyXG4gICAgICAgICAgICBhbGVydChcImRhdGkgbm9uIHZhbGlkaVwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy8gY2hlY2sgaWYgdGhlIHBhc3N3b3JkIGlzIHZhbGlkXHJcbiAgICBhbmFseXNlUGFzc3dvcmQ6IGZ1bmN0aW9uKHBhc3N3b3JkKXtcclxuICAgICAgaWYocGFzc3dvcmQgIT0gdW5kZWZpbmVkICYmIHBhc3N3b3JkICE9IG51bGwpe1xyXG4gICAgICAgIHZhciByZSA9IG5ldyBSZWdFeHAoXCJeKD89LipbYS16XSkoPz0uKltBLVpdKSg/PS4qWzAtOV0pKD89Lns2LH0pXCIpO1xyXG4gICAgICAgIHZhciBjaGVjayA9IHJlLnRlc3QocGFzc3dvcmQpO1xyXG4gICAgICAgIHJldHVybiBjaGVjaztcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL2NoZWNrIGlmIHRoZSBzdHJpbmcgaGFzIHRoZSBtaW4gbGVuZ3RoXHJcbiAgICBjaGVja2xlbmd0aFN0cmluZzogZnVuY3Rpb24ocywgbWlubGVuZ3RoKXtcclxuICAgICAgaWYocyAhPSB1bmRlZmluZWQgJiYgcyAhPSBudWxsICYmIG1pbmxlbmd0aCA+IDApe1xyXG4gICAgICAgIGlmKHMubGVuZ3RoIDwgbWlubGVuZ3RoKXtcclxuICAgICAgICAgIC8vIHRoZSBzdHJpbmcgaXMgc2hvcnRcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIC8vIHRoZSBzdHJpbmcgbGVuZ3RoIGlzIGdvb2RcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0sXHJcbiAgICAvL2NoZWNrIGlmIHMxIGFuZCBzMiBhcmUgZXF1YWxcclxuICAgIGNoZWNrSWZFcXVhbFN0cmluZzogZnVuY3Rpb24oczEsIHMyKXtcclxuICAgICAgaWYoczEgIT0gdW5kZWZpbmVkICYmIHMxICE9IG51bGwgJiYgczIgIT0gdW5kZWZpbmVkICYmIHMyICE9IG51bGwpe1xyXG4gICAgICAgIGlmKHMxID09PSBzMilcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNoZWNrSWZFbXB0eUZpZWxkczogZnVuY3Rpb24oKXtcclxuICAgICAgaWYodGhpcy51c2VyLm5hbWUgPT0gXCJcIiB8fCB0aGlzLnVzZXIuc3VybmFtZSA9PSBcIlwiIHx8IHRoaXMudXNlci5lbWFpbCA9PSBcIlwiIHx8IHRoaXMudXNlci5wYXNzd29yZCA9PSBcIlwiIHx8IHRoaXMucGFzc3dvcmRSZUVudGVyZWQgPT0gXCJcIil7XHJcbiAgICAgICAgdGhpcy5lbXB0eUZpZWxkcyA9IHRydWU7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZWdpc3RlckJ1dHRvblwiKS5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZXtcclxuICAgICAgICB0aGlzLmVtcHR5RmllbGRzID0gZmFsc2U7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZWdpc3RlckJ1dHRvblwiKS5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbjwvc2NyaXB0PlxyXG5cclxuPHN0eWxlIGxhbmc9XCJjc3NcIiBzY29wZWQ+XHJcbiNsb2FkaW5nR2lme1xyXG4gIHdpZHRoOiAyMHB4O1xyXG4gIGhlaWdodDogMjBweDtcclxufVxyXG5cclxuLmJ0bi1jaXJjbGUge1xyXG4gIHdpZHRoOiAzMHB4O1xyXG4gIGhlaWdodDogMzBweDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgcGFkZGluZzogNnB4IDA7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG4gIGxpbmUtaGVpZ2h0OiAxLjQyODU3MTQyOTtcclxuICBib3JkZXItcmFkaXVzOiAxNXB4IWltcG9ydGFudDtcclxufVxyXG4uYnRuLWNpcmNsZS5idG4tbGcge1xyXG4gIHdpZHRoOiA1MHB4O1xyXG4gIGhlaWdodDogNTBweDtcclxuICBwYWRkaW5nOiAxMHB4IDE2cHg7XHJcbiAgZm9udC1zaXplOiAxOHB4O1xyXG4gIGxpbmUtaGVpZ2h0OiAxLjMzO1xyXG4gIGJvcmRlci1yYWRpdXM6IDI1cHghaW1wb3J0YW50O1xyXG59XHJcbiNpbmZvLXBhc3N3b3Jke1xyXG4gIGhlaWdodDogNDRweDtcclxuICBmbG9hdDogcmlnaHQ7XHJcbn1cclxuLmVycm9yTWVzc2FnZXtcclxuICBjb2xvcjogcmVkO1xyXG4gIGZvbnQtc2l6ZTogMTJweDtcclxufVxyXG5oNHtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbmlucHV0W3R5cGU9XCJ0ZXh0XCJdLCBpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl17XHJcbiAgcGFkZGluZzogOHB4O1xyXG4gIG1hcmdpbjogYXV0bztcclxuICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4jcmVnaXN0ZXJCdXR0b257XHJcbiAgbWFyZ2luOiBhdXRvO1xyXG4gIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbiAgd2lkdGg6IDIwMHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDIwcHghaW1wb3J0YW50O1xyXG5cclxufVxyXG5cclxuXHJcbmZvcm17XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgbWF4LXdpZHRoOiAyNTBweDtcclxuICBtYXJnaW46IDAgYXV0bztcclxufVxyXG48L3N0eWxlPlxyXG4iXX0=